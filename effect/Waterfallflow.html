<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>瀑布流</title>
<style>
*{ margin:0; padding:0; list-style:none;}
#div1{ width:966px; margin:0 auto;}
#div1 ul{ width:300px; border:1px solid #ccc; float:left; margin:0 10px;}
#div1 ul li{width:100%; margin:10px 0; overflow:hidden;}
</style>
<script>
window.onload=function(){
	var oDiv=document.getElementById("div1");
	var aUl=oDiv.children;
	createLi();
	function createLi(){
		for(var i=0;i<20;i++){
			var oLi=document.createElement("li");
			oLi.style.height=parseInt(Math.random()*110+100)+"px";
			oLi.innerHTML='<img src="images/img'+rnd(1,16)+'.jpg" />';
			var arr=[];
			for(var j=0;j<aUl.length;j++){
				arr.push(aUl[j]);
			}
			arr.sort(function(oUl1,oUl2){return oUl1.offsetHeight-oUl2.offsetHeight});
			arr[0].appendChild(oLi);
		}	
	}
	window.onscroll=function(){
		var scrollTop=document.documentElement.scrollTop||document.body.scrollTop;
		var clientH=document.documentElement.clientHeight;
		var bodyH=document.body.scrollHeight;
		if(bodyH==scrollTop+clientH){
			createLi();
		}
	};
};
function rnd(n,m){
	return Math.floor(Math.random()*(m-n)+n);
}
</script>
</head>

<body>
<div id="div1">
	<ul></ul>
    <ul> </ul>
    <ul></ul>
</div>
</body>
</html>
